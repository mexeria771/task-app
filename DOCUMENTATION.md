# タスク管理アプリ ドキュメント

## 概要

このアプリケーションは、現在取り組んでいるタスクを明確に可視化し、割り込みタスクも管理できるシンプルなタスク管理ツールです。ゲーム画面のようなシンプルなUIを持ち、何をしているか常に明確に把握できます。

## 主な機能

### メインタスク管理

- **タスクの追加**: 新しいタスクをシステムに追加できます。
- **タスクの編集**: 既存のタスクの内容を変更できます。
- **タスクの削除**: 不要になったタスクを削除できます。
- **タスクの完了**: タスクが完了したら、完了としてマークできます。
- **現在のタスク選択**: 今取り組んでいるタスクを選択できます。

### タイマー機能

- **時間計測**: 選択したタスクに対して作業時間を計測できます。
- **一時停止**: 作業を中断する際にタイマーを一時停止できます。
- **継続時間表示**: タスクごとの経過時間を表示します。

### サブタスク管理

- **サブタスクの追加**: メインタスクを小さなサブタスクに分割できます。
- **サブタスクの完了チェック**: 完了したサブタスクをチェックできます。
- **サブタスクの順序変更**: サブタスクの順序を上下に変更できます。
- **サブタスクの削除**: 不要なサブタスクを削除できます。

### 割り込みタスク管理

- **割り込みタスクの追加**: 作業中に発生した割り込みタスクを素早くメモできます。
- **メインタスクへの移行**: 割り込みタスクをメインタスクリストに追加できます。
- **割り込みタスクの削除**: 不要な割り込みタスクを削除できます。

## 使用方法

### 初回起動時

1. `start-server.bat`または`start-server-node.bat`を実行してローカルサーバーを起動します。
2. ブラウザで`http://localhost:8000`にアクセスします。
3. 初回はサンプルタスクが表示されます。

### タスク管理

1. **新規タスク追加**:
   - 「新規タスク」ボタンをクリックします。
   - タイトルとメモを入力して「保存」をクリックします。

2. **タスクの選択**:
   - タスク一覧から「選択」ボタンをクリックすると、現在のタスクとして設定されます。

3. **タスクの編集**:
   - タスク一覧の「編集」ボタンをクリックして内容を変更できます。

4. **タスクの完了**:
   - 現在のタスク表示エリアの「完了」ボタンをクリックします。

### タイマー操作

1. **タイマー開始**:
   - 現在のタスクが選択された状態で「開始」ボタンをクリックします。

2. **タイマー停止**:
   - 「一時停止」ボタンをクリックしてタイマーを停止します。

### サブタスク管理

1. **サブタスク追加**:
   - 現在のタスク表示エリアで「サブタスク追加」ボタンをクリックします。
   - サブタスクの内容とメモを入力して「保存」をクリックします。

2. **サブタスク完了**:
   - サブタスクの左側のチェックボックスをクリックします。

3. **サブタスク順序変更**:
   - サブタスクの右側の「↑」「↓」ボタンで順序を変更できます。

### 割り込みタスク管理

1. **割り込みタスク追加**:
   - サイドバーの入力欄にタスク名を入力し、「割り込みメモを追加」をクリックします。

2. **メインタスクに追加**:
   - 割り込みタスクの「メインに追加」ボタンをクリックします。

## データの永続化

アプリケーションは以下のいずれかの方法でデータを保存します：

1. **ローカルストレージ**:
   - `config.js`の`useLocalStorage`が`true`の場合、ブラウザのローカルストレージにデータが保存されます。
   - このモードではブラウザをクリアするとデータが失われる可能性があります。

2. **Supabase**:
   - `config.js`の`useLocalStorage`が`false`の場合、Supabaseサーバーにデータが保存されます。
   - このモードではデバイス間でデータが同期されます。

## トラブルシューティング

### アプリケーションが読み込まれない

- ローカルサーバーが正常に起動しているか確認してください。
- ブラウザが最新バージョンかどうか確認してください。
- インターネット接続が有効で、Supabaseサーバーにアクセスできることを確認してください。

### データが保存されない

- Supabaseモードの場合、インターネット接続が安定しているか確認してください。
- ローカルストレージモードの場合、ブラウザのローカルストレージが有効になっているか確認してください。

### タイマーが正常に動作しない

- ブラウザのタブがバックグラウンドになっていると、タイマーの精度が下がる場合があります。
- タスクを切り替える前に、現在のタイマーを停止することをお勧めします。

## 将来の拡張予定

1. **ドラッグアンドドロップ機能**:
   - HTML5 Drag and Drop APIを使用したタスクの順序変更。

2. **統計情報機能**:
   - 作業時間の集計や日次/週次の進捗状況表示。

3. **認証機能**:
   - Supabase認証を利用したユーザー登録とログイン機能。

4. **テーマカスタマイズ**:
   - ダークモード/ライトモード切り替えやカラーテーマの選択。

5. **キーボードショートカット**:
   - タスク切り替えやタイマー操作のショートカット。

6. **定期タスク機能**:
   - 繰り返しタスクの設定とリマインダー機能。
